(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2583:function(e,t,a){Promise.resolve().then(a.bind(a,991))},991:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var s=a(7437),l=a(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&a.indexOf(e)===t).join(" ")};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,l.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:m,...p}=e;return(0,l.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:a,strokeWidth:c?24*Number(r)/Number(s):r,className:n("lucide",o),...p},[...m.map(e=>{let[t,a]=e;return(0,l.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let a=(0,l.forwardRef)((a,s)=>{let{className:i,...o}=a;return(0,l.createElement)(c,{ref:s,iconNode:t,className:n("lucide-".concat(r(e)),i),...o})});return a.displayName="".concat(e),a},d=o("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),m=o("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),p=o("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),h=o("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]),u=o("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),x=o("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),y=o("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),g=o("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),f=o("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),b=o("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),j=o("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),w=[{code:"ru",name:"Русский",flag:"\uD83C\uDDF7\uD83C\uDDFA"},{code:"tg",name:"Тоҷикӣ",flag:"\uD83C\uDDF9\uD83C\uDDEF"},{code:"en",name:"English",flag:"\uD83C\uDDEC\uD83C\uDDE7"}],N={ru:{appName:"Student AI Helper",appDescription:"Генерация учебного контента с помощью ИИ",documentType:"Тип документа",srs:"СРС (Реферат)",presentation:"Презентация",topic:"Тема",topicPlaceholder:"Например: Влияние интернета на современное общество",subject:"Предмет",subjectPlaceholder:"Например: Социология",pagesCount:"Количество страниц",slidesCount:"Количество слайдов",additionalInfo:"Дополнительные указания",additionalPlaceholder:"Особые требования, акценты, стиль написания...",generate:"Сгенерировать и скачать PDF",generating:"Генерация... (может занять до минуты)",success:"PDF успешно сгенерирован и скачан!",errorFillFields:"Заполните тему и предмет",history:"История генераций",historyEmpty:"История пуста",delete:"Удалить",download:"Скачать",confirmDelete:"Удалить эту запись?",poweredBy:"Powered by Google Gemini AI",language:"Язык",required:"*"},tg:{appName:"Дастёри AI Донишҷӯ",appDescription:"Тавлиди мундариҷаи таълимӣ бо ёрии AI",documentType:"Навъи ҳуҷҷат",srs:"Кори мустақилона",presentation:"Презентатсия",topic:"Мавзӯъ",topicPlaceholder:"Масалан: Таъсири интернет ба ҷамъияти муосир",subject:"Фан",subjectPlaceholder:"Масалан: Ҷомеашиносӣ",pagesCount:"Шумораи саҳифаҳо",slidesCount:"Шумораи слайдҳо",additionalInfo:"Дастурҳои иловагӣ",additionalPlaceholder:"Талаботҳои махсус, услуб...",generate:"Тавлид ва боргирии PDF",generating:"Тавлид... (метавонад як дақиқа давом кунад)",success:"PDF бомуваффақият сохта ва боргирӣ шуд!",errorFillFields:"Мавзӯъ ва фанро пур кунед",history:"Таърихи тавлид",historyEmpty:"Таърих холӣ аст",delete:"Нест кардан",download:"Боргирӣ",confirmDelete:"Оё ин сабтро нест мекунед?",poweredBy:"Бо Google Gemini AI",language:"Забон",required:"*"},en:{appName:"Student AI Helper",appDescription:"AI-powered academic content generation",documentType:"Document Type",srs:"Essay/Paper",presentation:"Presentation",topic:"Topic",topicPlaceholder:"e.g., The impact of internet on modern society",subject:"Subject",subjectPlaceholder:"e.g., Sociology",pagesCount:"Number of pages",slidesCount:"Number of slides",additionalInfo:"Additional instructions",additionalPlaceholder:"Special requirements, emphasis, writing style...",generate:"Generate and Download PDF",generating:"Generating... (may take up to a minute)",success:"PDF successfully generated and downloaded!",errorFillFields:"Please fill in topic and subject",history:"Generation History",historyEmpty:"History is empty",delete:"Delete",download:"Download",confirmDelete:"Delete this record?",poweredBy:"Powered by Google Gemini AI",language:"Language",required:"*"}};function v(e,t){return N[e][t]||t}function k(){let[e,t]=(0,l.useState)("ru"),[a,r]=(0,l.useState)({type:"srs",topic:"",subject:"",pages:5,additionalInfo:""}),[n,i]=(0,l.useState)(!1),[c,o]=(0,l.useState)(""),[N,k]=(0,l.useState)(""),[D,C]=(0,l.useState)([]),[M,P]=(0,l.useState)(!1),E=(0,l.useCallback)(async()=>{try{let e=await fetch("/api/history"),t=await e.json();C(t)}catch(e){console.error("Failed to load history")}},[]);(0,l.useEffect)(()=>{E()},[E]);let F=(e,t)=>{r(a=>({...a,[e]:t}))},L=async t=>{t.preventDefault();let{type:s,topic:l,subject:n,pages:c,additionalInfo:d}=a;if(!l.trim()||!n.trim()){o(v(e,"errorFillFields"));return}i(!0),o(""),k("");try{let t=await fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:s,topic:l,subject:n,pages:c,additionalInfo:d,language:e})}),a=t.headers.get("content-type");if(!t.ok||!(null==a?void 0:a.includes("application/pdf"))){let e=await t.json();throw Error(e.message||e.error||"Ошибка генерации")}let i=await t.blob();if(0===i.size)throw Error("Получен пустой PDF файл");let o=window.URL.createObjectURL(i),m=document.createElement("a");m.href=o,m.download="".concat(s,"_").concat(l.slice(0,30),"_").concat(Date.now(),".pdf"),document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(o),k(v(e,"success")),E(),r(e=>({...e,topic:"",additionalInfo:""}))}catch(e){console.error("Generation error:",e),o(e.message)}finally{i(!1)}},A=async e=>{let t=await fetch("/api/history/".concat(e,"?download=pdf")),a=await t.blob(),s=URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download="document_".concat(e,".pdf"),l.click(),URL.revokeObjectURL(s)},I=async t=>{confirm(v(e,"confirmDelete"))&&(await fetch("/api/history/".concat(t),{method:"DELETE"}),E())},S=t=>new Date(t).toLocaleDateString("en"===e?"en-GB":"tg"===e?"tg-TJ":"ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"});return(0,s.jsxs)("div",{className:"min-h-screen py-8 px-4",children:[(0,s.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute top-20 left-10 w-72 h-72 bg-primary-500/10 rounded-full blur-3xl"}),(0,s.jsx)("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-accent-500/10 rounded-full blur-3xl"})]}),(0,s.jsxs)("div",{className:"relative max-w-2xl mx-auto",children:[(0,s.jsx)("div",{className:"flex justify-end mb-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 glass-card px-3 py-2",children:[(0,s.jsx)(d,{className:"w-4 h-4 text-slate-400"}),w.map(a=>(0,s.jsxs)("button",{onClick:()=>t(a.code),className:"px-3 py-1 rounded-lg text-sm font-medium transition-all ".concat(e===a.code?"bg-primary-500 text-white":"text-slate-400 hover:text-white hover:bg-white/10"),children:[a.flag," ",a.name]},a.code))]})}),(0,s.jsxs)("header",{className:"text-center mb-10",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 mb-4 rounded-2xl bg-gradient-to-br from-primary-500 to-accent-500 animate-float pulse-glow",children:(0,s.jsx)(m,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h1",{className:"text-4xl font-bold mb-2",children:(0,s.jsx)("span",{className:"gradient-text",children:v(e,"appName")})}),(0,s.jsx)("p",{className:"text-slate-400",children:v(e,"appDescription")})]}),(0,s.jsx)("div",{className:"glass-card p-8 mb-6",children:(0,s.jsxs)("form",{onSubmit:L,children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:v(e,"documentType")}),(0,s.jsxs)("div",{className:"type-toggle",children:[(0,s.jsx)("div",{className:"absolute h-[calc(100%-8px)] bg-gradient-to-r from-primary-500 to-primary-600 rounded-lg transition-all duration-300",style:{width:"calc(50% - 4px)",left:"srs"===a.type?"4px":"calc(50%)"}}),(0,s.jsxs)("button",{type:"button",onClick:()=>F("type","srs"),className:"type-toggle-btn flex items-center justify-center gap-2 ".concat("srs"===a.type?"active":""),children:[(0,s.jsx)(p,{className:"w-4 h-4"}),v(e,"srs")]}),(0,s.jsxs)("button",{type:"button",onClick:()=>F("type","presentation"),className:"type-toggle-btn flex items-center justify-center gap-2 ".concat("presentation"===a.type?"active":""),children:[(0,s.jsx)(h,{className:"w-4 h-4"}),v(e,"presentation")]})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[v(e,"topic")," ",v(e,"required")]}),(0,s.jsx)("input",{type:"text",value:a.topic,onChange:e=>F("topic",e.target.value),placeholder:v(e,"topicPlaceholder"),className:"glass-input",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[v(e,"subject")," ",v(e,"required")]}),(0,s.jsx)("input",{type:"text",value:a.subject,onChange:e=>F("subject",e.target.value),placeholder:v(e,"subjectPlaceholder"),className:"glass-input",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"srs"===a.type?v(e,"pagesCount"):v(e,"slidesCount")}),(0,s.jsx)("input",{type:"number",value:a.pages,onChange:e=>F("pages",Math.max(3,Math.min(20,parseInt(e.target.value)||5))),min:3,max:20,className:"glass-input w-32"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:v(e,"additionalInfo")}),(0,s.jsx)("textarea",{value:a.additionalInfo,onChange:e=>F("additionalInfo",e.target.value),placeholder:v(e,"additionalPlaceholder"),rows:3,className:"glass-input resize-none"})]}),c&&(0,s.jsxs)("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/20 rounded-xl flex items-center gap-3 text-red-400",children:[(0,s.jsx)(u,{className:"w-5 h-5 flex-shrink-0"}),c]}),N&&(0,s.jsxs)("div",{className:"mb-4 p-4 bg-green-500/10 border border-green-500/20 rounded-xl flex items-center gap-3 text-green-400",children:[(0,s.jsx)(x,{className:"w-5 h-5 flex-shrink-0"}),N]}),(0,s.jsx)("button",{type:"submit",disabled:n,className:"btn-primary w-full flex items-center justify-center gap-3",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"spinner"}),v(e,"generating")]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y,{className:"w-5 h-5"}),v(e,"generate")]})})]})}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[(0,s.jsxs)("button",{onClick:()=>P(!M),className:"w-full flex items-center justify-between text-slate-300 hover:text-white transition-colors",children:[(0,s.jsxs)("span",{className:"flex items-center gap-2 font-medium",children:[(0,s.jsx)(g,{className:"w-5 h-5"}),v(e,"history")," (",D.length,")"]}),(0,s.jsx)("span",{className:"text-2xl",children:M?"−":"+"})]}),M&&D.length>0&&(0,s.jsx)("div",{className:"mt-4 space-y-3",children:D.map(t=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-xl border border-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:["srs"===t.type?(0,s.jsx)(p,{className:"w-5 h-5 text-primary-400 flex-shrink-0"}):(0,s.jsx)(h,{className:"w-5 h-5 text-accent-400 flex-shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-white truncate",children:t.topic}),(0,s.jsxs)("p",{className:"text-xs text-slate-400",children:[t.subject," • ",S(t.created_at)]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,s.jsx)("button",{onClick:()=>A(t.id),className:"p-2 rounded-lg bg-primary-500/20 text-primary-400 hover:bg-primary-500/30 transition-colors",title:v(e,"download"),children:(0,s.jsx)(f,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>I(t.id),className:"p-2 rounded-lg bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors",title:v(e,"delete"),children:(0,s.jsx)(b,{className:"w-4 h-4"})})]})]},t.id))}),M&&0===D.length&&(0,s.jsx)("p",{className:"mt-4 text-center text-slate-500 py-4",children:v(e,"historyEmpty")})]}),(0,s.jsxs)("footer",{className:"text-center mt-8 text-slate-500 text-sm",children:[(0,s.jsxs)("p",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(j,{className:"w-4 h-4"}),v(e,"poweredBy")]}),(0,s.jsx)("p",{className:"mt-1 text-xs text-slate-600",children:"v2.0.0 (Next.js)"})]})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=2583)}),_N_E=e.O()}]);